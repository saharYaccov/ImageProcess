<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Image Prediction</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #4f46e5, #a78bfa);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    header h1 {
      font-size: 3rem;
      margin-bottom: 10px;
    }
    header p {
      font-size: 1.2rem;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.5;
    }

    section {
      background: rgba(255,255,255,0.1);
      padding: 30px 20px;
      margin: 20px auto;
      border-radius: 20px;
      max-width: 900px;
      text-align: center;
    }

    section h2 {
      font-size: 2rem;
      margin-bottom: 15px;
      color: #ffe;
    }
    section p {
      font-size: 1.1rem;
      margin-bottom: 20px;
      color: #f0f0ff;
    }
    section img {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    input[type="file"] {
      margin: 20px 0;
      padding: 10px;
      border-radius: 8px;
      border: none;
    }

    button {
      background-color: #fff;
      color: #4f46e5;
      border: none;
      padding: 12px 25px;
      font-size: 1.1rem;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    button:hover {
      background-color: #e0d7ff;
      transform: scale(1.05);
    }

    #preview {
      margin-top: 20px;
      max-width: 300px;
      max-height: 300px;
      border: 2px solid #ddd;
      border-radius: 12px;
      object-fit: contain;
    }

    #result {
      margin-top: 20px;
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 12px;
      color: #4f46e5;
      font-weight: bold;
      max-width: 400px;
      white-space: pre-wrap;
    }

    footer {
      margin-top: 40px;
      text-align: center;
      font-size: 0.9rem;
      color: #fff;
      padding: 20px;
    }

    @media (max-width: 768px) {
      header h1 { font-size: 2.2rem; }
      section h2 { font-size: 1.5rem; }
    }
  </style>
</head>
<body>

<header>
  <h1>AI Image Prediction</h1>
  <p>
    Upload an image to see whether our AI model classifies it as real or AI-generated.
    The model uses a <strong>CNN (Convolutional Neural Network)</strong> to analyze patterns and features in images.
  </p>
</header>

<section>
  <h2>How It Works</h2>
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/63/Typical_cnn.png" alt="CNN Diagram">
  <p>
    The CNN model scans the image using convolutional layers to detect edges, textures, and features.
    Pooling layers reduce size while retaining important information. Fully connected layers then 
    combine these features to produce a prediction.
  </p>
</section>

<section>
  <h2>Upload Your Image</h2>
  <input type="file" id="imageInput" />
  <br>
  <button id="predictBtn">Predict</button>
  <img id="preview" src="" alt="Preview" style="display:none;" />
  <div id="result"></div>
</section>

<section>
  <h2>Understanding the Result</h2>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/26/Confusion_matrix.png" alt="Confusion Matrix">
  <p>
    Class 0 = Real Image<br>
    Class 1 = AI-generated<br>
    Confidence score indicates how sure the model is about its prediction.
  </p>
</section>

<footer>
  &copy; 2025 Image Prediction Project. All rights reserved.
</footer>

<script>
  const btn = document.getElementById('predictBtn');
  const input = document.getElementById('imageInput');
  const resultDiv = document.getElementById('result');
  const previewImg = document.getElementById('preview');

  input.onchange = () => {
    if (input.files.length) {
      previewImg.src = URL.createObjectURL(input.files[0]);
      previewImg.style.display = 'block';
      resultDiv.textContent = '';
    }
  }

  btn.onclick = async () => {
    if (!input.files.length) return;
    const file = input.files[0];
    const reader = new FileReader();

    reader.onload = async () => {
      const base64 = reader.result.split(',')[1];
      try {
        const res = await fetch('https://imageprocess-9zk1.onrender.com/predict', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ image_base64: base64 })
        });
        const data = await res.json();
        resultDiv.textContent = `Prediction: ${data.label === 0 ? 'Real' : 'AI-generated'}\nConfidence: ${data.confidence.toFixed(2)}`;
      } catch (err) {
        resultDiv.textContent = 'Error: ' + err;
      }
    };

    reader.readAsDataURL(file);
  };
</script>

</body>
</html>
